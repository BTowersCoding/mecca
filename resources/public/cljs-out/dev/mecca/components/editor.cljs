(ns ^:figwheel-hooks mecca.components.editor
  (:require
   [reagent.core :as r]
   [re-frame.core :as rf :refer [subscribe dispatch]]
   [mecca.components.notation :as notation]
   [mecca.components.key :as key]))

(defn tempo-input []
  [:label " Tempo: "
   [:input
    {:style {:width "8%"
             :background-color "lightgray"}
     :type "number"
     :value @(subscribe [:tempo])
     :on-change (fn [e]
                  (.preventDefault e)
                  (dispatch [:set-tempo
                             (-> e .-target .-value)]))}]])

(defn scroll-cue-left [x y]
  [:g.fade [:line {:stroke "black" :stroke-width 0.25
                   :x1 x :y1 y :x2 (dec x) :y2 (inc y)}]
   [:line {:stroke "black" :stroke-width 0.25
           :x1 (dec x) :y1 (inc y) :x2 x :y2 (+ 2 y)}]])

(defn scroll-cue-right [x y]
  [:g.fade [:line {:stroke "black" :stroke-width 0.25
                   :x1 x :y1 y :x2 (inc x) :y2 (inc y)}]
   [:line {:stroke "black" :stroke-width 0.25
           :x1 (inc x) :y1 (inc y) :x2 x :y2 (+ 2 y)}]])

(defn advance-editor []
  (let [mouseover? (r/atom false)]
    (fn []
      [:g
       [:rect {:x 58 :y 5
               :height 32
               :width 6
               :pointer-events "all"
               :visibility "hidden"
               :on-mouse-over #(reset! mouseover? true)
               :on-mouse-out #(reset! mouseover? false)
               :on-click #(dispatch [:advance-editor])}]
       (if @mouseover?
         [:g
          [scroll-cue-right 61.5 8]
          [scroll-cue-right 61.5 14]
          [scroll-cue-right 61.5 20]
          [scroll-cue-right 61.5 26]
          [scroll-cue-right 61.5 32]])])))

(defn retract-editor [x]
  (let [mouseover? (r/atom false)]
    (fn []
      [:g
       [:rect {:x x :y 5
               :height 32
               :width 6
               :pointer-events "all"
               :visibility "hidden"
               :on-mouse-over #(reset! mouseover? true)
               :on-mouse-out #(reset! mouseover? false)
               :on-click #(dispatch [:retract-editor])}]
       (if @mouseover?
         [:g
          [scroll-cue-left (+ 3 x) 8]
          [scroll-cue-left (+ 3 x) 14]
          [scroll-cue-left (+ 3 x) 20]
          [scroll-cue-left (+ 3 x) 26]
          [scroll-cue-left (+ 3 x) 32]])])))

(defn note-guides []
  [:g [notation/beat-line 0 0]
   [notation/beat-line 1 1]
   [notation/beat-line 2 2]
   [notation/beat-line 3 3]])

(defn tempo-slider []
  [:path {:d "M37.867 10.655 37.43 10.643 37.001 10.186 36.572 9.728V9.332 8.935L37.04 8.468 37.507 8H37.906 38.304L38.772 8.468 39.239 8.935V9.333 9.732L38.772 10.199 38.304 10.667 37.867 10.655Z
;M37.873 10.278 38.315 10.286 38.587 10.014 38.859 9.742V9.334 8.925L38.587 8.653 38.314 8.381H37.906 37.498L37.226 8.653 36.954 8.925V9.328 9.73L37.192 10.001 37.43 10.271 37.872 10.279Z
M37.907 9.524H37.335V9.333 9.143H37.906 38.478V9.333 9.524Z
M59.582 10.655 59.145 10.643 58.716 10.186 58.288 9.728V9.332 8.935L58.755 8.468 59.223 8H59.621 60.019L60.487 8.468 60.954 8.935V9.333 9.732L60.487 10.199 60.019 10.667 59.582 10.655Z
M59.588 10.278 60.03 10.286 60.302 10.014 60.575 9.742V9.334 8.925L60.302 8.653 60.03 8.381H59.621 59.213L58.941 8.653 58.669 8.926V9.328 9.731L58.907 10.001 59.145 10.272 59.587 10.279Z
M59.588 9.898 59.527 9.89 59.278 9.608 59.03 9.327 59.326 9.03 59.622 8.734 59.922 9.033 60.221 9.333 59.935 9.619 59.649 9.904 59.588 9.896Z
M48.765 9.905H41.145V9.524 9.143H48.764 56.383V9.524 9.905Z"}])

(defn stop-button-label []
  [:path {:d "M4.572 5.714H3.81V5.524 5.333H4.381 4.953V5.143 4.952H4.381 3.81V4.381 3.81H4.572 5.334V4 4.191H4.762 4.191V4.381 4.571H4.762 5.334V5.143 5.714Z
M6.667 5.714H6.476V4.952 4.191H6.095 5.714V4 3.81H6.667 7.619V4 4.191H7.238 6.857V4.952 5.714Z
M8.762 5.714H8V4.762 3.81H8.762 9.524V4.762 5.714Z
M8.762 5.333H9.143V4.762 4.191H8.762 8.381V4.762 5.333Z
M10.095 5.714H9.905V4.762 3.81H10.667 11.429V4.381 4.952H10.857 10.286V5.333 5.714Z
M10.667 4.571H11.048V4.381 4.191H10.667 10.286V4.381 4.571Z"}])

(defn play-button-label []
  [:path {:d "M16.191 5.714H16V4.762 3.81H16.762 17.524V4.381 4.952H16.953 16.381V5.333 5.714Z
M16.762 4.571H17.143V4.381 4.191H16.762 16.381V4.381 4.571Z
M18.667 5.714H17.905V4.762 3.81H18.095 18.286V4.571 5.333H18.857 19.429V5.524 5.714Z
M20 5.714H19.81V5.034 4.354L20.082 4.082 20.354 3.81H20.572 20.789L21.061 4.082 21.334 4.354V5.034 5.714H21.143 20.953V5.333 4.952H20.572 20.191V5.333 5.714Z
M20.572 4.571H20.953V4.381 4.191H20.572 20.191V4.381 4.571Z
M22.667 5.714H22.476V5.213 4.711L22.065 4.355 21.653 3.998 21.778 3.873 21.903 3.749 22.285 4.189 22.667 4.63 23.049 4.189 23.431 3.749 23.556 3.873 23.68 3.998 23.269 4.355 22.857 4.711V5.213 5.714Z"}])

(defn loop-button-label []
  [:path {:d "M28.953 5.714H28.191V4.762 3.81H28.381 28.572V4.571 5.333H29.143 29.715V5.524 5.714Z
M30.857 5.714H30.095V4.762 3.81H30.857 31.619V4.762 5.714Z
M30.857 5.333H31.238V4.762 4.191H30.857 30.476V4.762 5.333Z
M32.762 5.714H32V4.762 3.81H32.762 33.524V4.762 5.714Z
M32.762 5.333H33.143V4.762 4.191H32.762 32.381V4.762 5.333Z
M34.095 5.714H33.905V4.762 3.81H34.667 35.429V4.381 4.952H34.857 34.286V5.333 5.714Z
M34.667 4.571H35.048V4.381 4.191H34.667 34.286V4.381 4.571Z"}])

(defn robot []
  [:g {:transform "scale(1.5) translate(-1,-0.125)"}
   [:path {:d "M13.84 1.65v-.2H14.01v.4H13.84zm-.49.24a2.15 2.15 0 0 1-.13-.14l.1-.03.1-.04v-.24h.24v.6H13.5zm-7.8.06v-.08H5.7v.16H5.55zm-1.04 19.2a.64.64 0 0 0-.03-.08l-.02-.04-.05.06-.05.05v-.22h.16v.26l-.01-.03zm-1.17-.96v-.12H3.51v.25H3.34zm0-1.61v-.12H3.57l-.11.12-.12.1v-.1zm0-1.61v-.11H3.57l-.11.1-.12.12v-.11zm0-1.61v-.12h.24l-.11.12-.13.11v-.11zm0-1.62v-.1H3.57l-.11.1-.12.12v-.12zm0-1.67v-.13H3.51v.25H3.34zm0-1.6v-.13H3.51v.24H3.34zm0-1.63v-.12H3.51v.25H3.34zm0-1.62v-.1H3.57l-.11.1-.12.12v-.12zm1.17-.63a.66.66 0 0 0-.03-.07l-.02-.05-.05.05-.05.05V6.36h.16v.26l-.01-.03zM3.34 5.46c0-.13 0-.12.14-.12h.09l-.12.12-.1.11zm-.17-.22v-.08h.09l.08-.01v.18h-.18zm1.78.21v-.11H5.18l-.11.11-.12.11v-.1zm1.62 0v-.11H6.78l-.1.1-.11.11v-.1zm1.6 0v-.11h.22l-.1.1-.11.11v-.1zm1.6-.03v-.08h.15l.14.01-.02.08-.03.06H9.78zm1.62 0v-.08H11.68l-.03.07-.03.08H11.4zm1.6 0v-.08h.3l-.03.07-.03.08H13zm1.7.03v-.11h.22l-.1.1-.11.11v-.1zm-.85 1.15v-.08H14.01V6.7H13.84zm.85.62v-.1H14.92l-.1.1-.12.12v-.12zm0 1.62v-.12h.16v.25h-.16zm0 1.62v-.12h.16v.24h-.16zm0 1.6v-.12h.16v.25h-.16zm0 1.68v-.1H14.92l-.1.1-.12.12v-.12zm0 1.61v-.11H14.92l-.1.11-.12.11v-.1zm0 1.61v-.1h.22l-.1.1-.11.1v-.1zm0 1.6v-.1h.22l-.1.1-.11.12v-.11zm0 1.63v-.12h.08c.07 0 .08 0 .07.02a.56.56 0 0 0 0 .2c0 .03 0 .03-.07.03h-.08zm.16 0v-.06.06zm-.16 1.61v-.12h.16v.24h-.16zm-.85-.75v-.13H14.01v.22l-.06-.05-.05-.05-.03.07-.03.08zm-.85.75v-.12h.25v.24h-.25zm-1.6 0v-.12h.24v.24h-.24zm-.76-.93v-.21h2.02v.25h-1.86v.16h-.16zm0-.76v-.2h2.02v.16h-1.87v.25H10.63zm-.85 1.69v-.12h.25v.24h-.25zm-1.6 0v-.12H8.32v.24h-.16zm-1.61 0v-.12H6.72v.24H6.57zm-1.62 0v-.12h.16v.24h-.16zm-1.6 0v-.12h.16v.24H3.34zm7.87-18.03v-.12h.08l.08-.01v.25H11.2zm-4.83 0v-.13h.16v.13l.01.12H6.39zm2.2.2V3.9h.6V4.05h-.6zm0-.8v-.12h.6v.25h-.6zm1.62-2.03v-.12H10.36v.25h-.16zm-.6.04v-.09l.12-.12.12-.12h.35V.7h.16V.84h-.04c-.04 0-.06.01-.17.12-.1.11-.12.12-.12.09v-.03h-.26v.25h-.16zm-.95 1.31l.13-.13-.05-.04-.05-.04.04-.04c.04-.03.04-.04.04-.12v-.09H9v.6h-.47zM7.15 1.05c0-.03 0-.03-.08-.03s-.09 0-.09-.1V.85h.35V.7h.24V.84H7.4l-.12.12c-.11.11-.12.12-.12.09zm-.41.1v-.13H6.97v.25H6.74zm.59 0v-.13H7.56v.25H7.33zm-2.97.61v-.32H4.53v.24l.1.04.1.04-.16.14-.18.16-.03.02zm-.42-.11v-.2h.16v.4h-.16zm2.03.63V.5l.12-.12.12-.12h5.6V.41h-.43v.26H11.2V.41H6.13V4.06h-.16zm9.36 2.75l-12.3-.01L3 22.24"
           :fill "#fff" :fill-opacity 0.97 :fill-rule "evenodd" :stroke "#fff" :stroke-width 0.04}]
   [:path {:d "M3 22.52h-.08v-.25H3.09v.25zm.21-.42H3.1V5.33h.25v-.25h11.68v.25h-.33v.34h.33v1.44h-.33v.43h.33v1.19h-.33V9.13h.33v1.19h-.33v.42h.33v1.19h-.33v.42h.33v1.27h-.33v.34h.33v1.27h-.33v.42h.33v1.19h-.33v.42h.33v1.19h-.33V18.88h.33v1.19h-.33V20.49h.33v1.18h-.33V22.1h-1.27V21.68H13.25v-1.6h-.19l-.12-.13-.12-.12v-.18h-2.2v.26h-.25v.59h.25V20.66h-.25v.85h.25v.16h.76V22.1H10.2V21.68H9.78V22.1H8.58V21.68H8.18V22.1H6.98V21.68h-.42V22.1H5.37V21.68h-.42V22.1H3.68V21.68h-.34V22.1zm1.02-.6h.3V21.28l-.11-.04-.1-.04.07-.08.07-.07.04.1.04.11H4.69v-.34h-.16v-.25h-.6v.85zm9.9 0h.3v-.84h-.6v.25h-.16v.34H13.82l.04-.1.04-.11.07.07.08.08-.1.04-.11.04v.24zM3.51 20.5h.17v-.42h-.34V20.49zm0-1.6h.17v-.43h-.34V18.88zm0-1.62h.17v-.42h-.34v.42zm0-1.6h.17v-.43h-.34v.42zm0-1.7h.17v-.34h-.34v.34zm0-1.6h.17v-.43h-.34v.42zm0-1.62h.17V10.33h-.34v.42zm0-1.6h.17V8.72h-.34V9.13zm0-1.61h.17V7.12h-.34V7.53zm10.65-.43h.27v-.76h-.52l-.12.12-.12.12v.27l.1.13.11.12h.28zm-.24-.17h-.08V6.7H14v.25zm-9.7 0h.3V6.7l-.1-.04-.1-.03.07-.08.07-.07.04.1.04.1H4.69v-.33h-.16V6.1h-.6v.84zm-.71-1.27h.17v-.34h-.34v.34zm1.65 0h.21v-.34h-.42v.34zm1.6 0h.22v-.34h-.42v.34zm1.62 0h.2v-.34H8.18v.34zm1.6 0h.22v-.34h-.43v.34zm1.61 0h.22v-.34H11.39v.34zm1.61 0h.22v-.34H13v.34zm-.8 16.43h-.6v-.43H13V22.1zm-.68-1.02h-.93V20.91h1.86V21.08zm0-.76h-.93v-.25h1.86v.25zM.38 16H.29V15.83H.46V16zm1.01 0H.72V15.83h1.35V16zm15.12 0h-.22v-.6H16.71v.6zm-14.02-.17h-.17V15.41h.34v.42zm14.8 0h-.2l-.1-.12-.1-.12v-.11l.12-.12.12-.12h.35V15.41h-.42v.25H17.48V15.83h-.2zM.38 15.66H.29v-.25H.46v.25zm1.01 0H.72v-.25h1.35v.25zm14.48-.25h-.17V15.24h.34V15.41zm-13.38-.17h-.17v-.25h.34v.25zm14.02 0h-.22v-.25H16.71v.25zm-15.12-.25H.72V14.82h1.35V14.99zm15.88 0h-.21V14.82H17.48V14.99zm-16.3-.34H.88v-.85H1.05v.85zm1.6 0H2.5v-.26H2.66v.26zm13.94 0h-.22v-.26H16.71v.26zM.97 12.95H.88v-.33H1.05v-.26H1.47v.26H1.06v.33zm15.28-3.38h-.21V9.3h.42v.26zm.55 0h-.08V9.3H16.89v.26zm.38 0h-.12V9.3h.25v.26zm-.93-.43h-.21V8.72h.42v.42zm.55 0h-.08V8.72H16.89v.42zm.38 0h-.12V8.72h.25v.42zm-.93-.59h-.21V8.3h.42v.25zm.55 0h-.08V8.3H16.89v.25zm.38 0h-.12V8.3h.25v.25zM3 5.08h-.08V4.91H3.09V5.08zm3.26-1.02h-.13V.42H6.55v.26H6.4V.85h.34V.42h.59v.26h-.34V.85h-.19l-.11.12-.12.12v.53l.12.12.12.12h.18V2.03h.34v.26h1.02V2.46H8.57l.04-.11.04-.1.06.05.07.06-.13.13-.13.13h-.18v-.16H8.17V2.88h-.6V3.05h-.25v.25h.25v.6h-.84v-.26h-.34v.42zm2.03 0H8V3.9h.6V4.06zm1.1 0h-.2V3.9H9.6V4.06zm1.74-.17h-.09v-.84h-.25V2.88h-.76v-.42h-.18l-.12-.13-.12-.12v-.18h-.22l-.12-.17-.13-.17h-.39v-.6L8.65.97 8.52.85H8.4L8.29.73 8.17.6V.42H10.2v.26H9.8L9.7.85l-.12.17H9.36v.67h.25V1.27h.16v.4l-.1.04-.1.04.14.14.14.14h.35v.26h1.18v-.26h.26v1.61h-.43v.25zM8.29 3.3H8v-.25h.6v.25zm1.1 0h-.2v-.25H9.6v.25zM4.4 2.46h-.04v-.37l.19-.17.19-.16-.1-.04-.11-.04v-.24H4.36v.25H4.1v-.25H3.93v-.42H4.1V1.44h.24l.04-.1.03-.11.14.14.14.14v.18h.26v.34h-.26v.18l-.12.12-.12.13zm-.38-.17h-.09V1.87H4.1V2.28zm9.52 0h-.12V2.1l-.13-.12-.12-.12H13V1.7h.26v-.18l.12-.12.12-.12h.18V1.44H13.84v-.6H14v.6h.25v.25h-.25v-.25H13.84v.25H13.67v-.25h-.25v.24l-.11.03-.1.04.14.14.14.14h.18v.26zm.38 0h-.08V1.87H14V2.28zm-1.18-.26h-.09V1.86H12.82V2.03zM6.85 1.7h-.12V1.27h.25v.42zm4.66-.67h-.13V.85h.26V1.02zM7.66.85h-.09V.68H7.74V.85zm2.83 0h-.12V.68h.25V.85zm.64-.17h-.09V.42H11.21v.26z"
           :fill "#c7c7be"}]
   [:path {:d "M2.79 22.7h-.13v-4.84h-.34v-.25h.34V16.6h-.34v-.76h-.25V15.66h.25V15.83h.34V15h-.34v-.34h-.25V14.82H.72V14.65h1.35v-.26h.25V14.22h.34V4.91h.26v-.25h12.53V5.08H15.28V4.91H2.92v17.78zm-.3-8.05h.17v-.26h-.34v.26zm.9 7.45h-.05V21.93H3.51v-.26H3.68v.19l-.12.12-.12.12zm1.64 0h-.08V21.93H5.12v-.26h.25v.26h-.25V22.1zm1.61 0h-.08V21.93H6.73v-.26h.25v.26h-.25V22.1zm1.61 0h-.08V21.93H8.34v-.26h.25v.26h-.25V22.1zm1.62 0h-.1V21.93h.26v-.26H10.2v.19l-.12.12-.12.12zm1.6 0h-.09V21.93h.26v-.26h-1.01v-.16h-.26v-.85h.25V20.49h-.25v-.6h.25v-.25h2.2v.18l.12.12.12.13h.19v1.6H13.42v.19l-.13.12-.12.12H13V21.93h.26v-.26H11.8v.19l-.12.12-.13.12zm.25-.85h1.1v-.6h-2.2v.6zm0-.76h1.1v-.6h-2.2v.6zm3.01 1.6h-.04v-.16h.16v-.26H15.02v.19l-.12.12-.12.12zm-10.5-.84H4.1v-.34h.26v.34zm9.9 0h-.12v-.34h.25v.34zM3.4 20.5h-.05V20.32H3.51v-.25H3.68v.18l-.12.12-.12.12zm11.34 0h-.04V20.32h.16v-.25H15.02v.18l-.12.12-.12.12zm1.06 0h-.09V20.32H15.87V20.49zm-12.37-1.6h-.08v-.2l.13-.12.13-.13.06.06.06.07-.1.03-.11.04v.24zm11.35 0h-.08v-.2l.13-.12.13-.13.06.06.06.07-.11.03-.1.04v.24zM.29 15.65V15.83zm.09 1.78H.29V17.27H.46V17.44zm1.01 0H.72V17.27h1.35V17.44zm2.03-.17h-.08v-.18l.13-.13.13-.13.06.06.06.07-.1.03-.11.04v.24zm11.35 0h-.08v-.18l.13-.13.13-.13.06.06.06.07-.11.03-.1.04v.24zm1.82-.68h-.13V16h.26v.6zM.38 16.43H.29V16H.46V16.42zm1.01 0H.72V16h1.35V16.42zm16-.17h-.08V15.84H17.48V16.25zM16.17 16h-.13v-.6h.25v.6zm.8-.17h-.08V15.66H17.06V15.83zm-13.55-.17h-.08v-.18l.13-.13.13-.13.06.06.06.07-.1.04-.11.03v.24zm11.35 0h-.08v-.18l.13-.13.13-.13.06.06.06.07-.11.04-.1.03v.24zm-14.4-.25H.3v-.42H.04v-.34H.46V14.8l-.1.05-.11.05.1.05.11.05v.4zm1.02 0H.72v-.42h1.35V15.4zm15.58 0h-.08V15.24H17.06V15.41zm-.8-.17h-.13v-.25h.25v-.34h-.59v-.26h.6V14.22H16.71V14.4h-.43v.26H16.71v.34H16.3v.25zm1.22 0h-.08v-.25H17.48V14.82H17.07l-.04.1-.04.1-.06-.05-.06-.06.13-.13.13-.13h.35V14.82h.25V14.99h-.25v.25zM1.48 14.22H1.3v-.25h.34v.25zm1.9-.25h-.04v-.1l.13-.13.13-.13.05.05.05.05-.13.13-.13.13zm11.35 0h-.04v-.1l.13-.13.13-.13.05.05.04.05-.13.13-.13.13zM.97 13.8H.88v-.77l.13-.12.12-.13h.35V12.95h-.43v.85zm.6-1.18h-.1v-.26h.18v.26zm1.82-.26h-.05V12.2H3.51v-.25H3.68v.18l-.12.12-.12.12zm11.34 0h-.04V12.2h.16v-.25H15.02v.18l-.12.12-.12.12zM3.4 10.76h-.05v-.18H3.51v-.25H3.68v.19l-.12.11-.12.12zm11.34 0h-.04v-.18h.16v-.25H15.02v.19l-.12.11-.12.12zm1.44-1.02h-.3V8.55H15.7v-.18l.12-.12.12-.12h.52V8.3H16.04v.25h.42V8.72H16.04v.85h.42V9.74zm.63 0h-.08V9.57H16.89V9.74zm.38 0h-.12V9.57h.25V9.74zm-13.8-.6h-.04V8.97H3.51v-.25H3.68v.18l-.12.12-.12.12zm11.35 0h-.04V8.97h.16v-.25H15.02v.18l-.12.12-.12.12zm2.07-.42h-.08V8.55H16.89V8.72zm.35 0h-.1V8.55h.26V8.3h-.25V8.13h.18l.12.12.12.12v.11l-.12.12-.12.12zm-.35-.42h-.08V8.13H16.89V8.3zM3.42 7.54h-.08v-.19l.13-.13.13-.13.06.07.06.06-.1.04-.11.04v.24zm11.35 0h-.08v-.19l.13-.13.13-.13.06.07.06.06-.11.04-.1.04v.24zm-.64-.6h-.12V6.52h.25v.42zm-9.9-.25H4.1v-.34h.26v.34zm-.84-1.02h-.05v-.09l.13-.14.13-.13.05.05.05.05-.13.13-.13.13zm1.64 0h-.08v-.09l.12-.13.12-.12h.18V5.5h-.25V5.67zm1.61 0h-.08v-.09l.12-.13.12-.12h.18V5.5h-.25V5.67zm1.61 0h-.08v-.09l.12-.13.12-.12h.18V5.5h-.25V5.67zm1.62 0h-.1V5.5h.24l.04-.1.04-.1.06.05.07.06-.13.13-.13.13zm1.6 0h-.09V5.5h.24l.04-.1.04-.1.06.05.07.06-.13.13-.14.13zm1.61 0H13V5.5h.24l.04-.1.04-.1.06.05.07.06-.14.13-.13.13zm1.65 0h-.04v-.09l.13-.14.13-.13.05.05.04.05-.13.13-.13.13zm-8.8-1.35H5.7V1.86H5.54V2.03H5.37V1.7h.34V.25h.25V0h6.1v.25H12.23V.42h-.42V.25H6.2l-.12.12-.13.13v3.56H6.13v.26zm.54-.26h-.08V3.9H6.56v-.25H6.73v.25h.59V4.06h-.58l-.05-.1-.05-.1-.05.1-.05.1zm1.19 0h-.09V3.9H7.74V4.06zm2.03 0h-.08V3.9h.16V4.06zm1.31 0h-.38V3.9h-.25V3.3h.25v-.25h-.25V2.88H10.79V3.05h.25v.84h.34v-.25h.26v-1.6h-.26v.25H10.2V1.87H9.78v-.43h.26v.18l.2.2.21.21h.7l.12-.12.12-.12v-.77h.26V.68h-.26v.34h-.09l-.12-.13-.13-.12V.68h.34V.42h.43v3.64H11.64V3.9h-.26V4.06zm-7.02-.59h-.3V3.3h.68V3.1l.17-.13.16-.12v-.22h.24l.04-.1.04-.1.08.07.07.07-.1.04-.11.04v.24h-.18L4.65 3l-.12.12v.11l-.13.12-.12.12zm9.99 0h-.3V3.3h-.25v-.18L13.29 3l-.12-.12H13v-.24l-.1-.04-.11-.04.08-.07.07-.08.04.1.04.11h.24v.19l.12.12.12.12h.18v.25h.6V3.47zM7.66 3.3h-.09v-.25H7.74v.25zm2.03 0h-.08v-.25h.16v.25zm-5.8-.42h-.21V.68h.6l.2.2.21.21v.18h.19l.12.12.12.12v.52H4.95v.26h-.2l-.15.18-.16.18-.06-.05-.05-.06.18-.16.18-.16v-.19h.26V1.7h-.26v-.18l-.14-.14-.14-.14-.03.1-.04.1H4.1v-.16h.26V.85h-.19l-.12.12-.12.12v1.2H4.1v.59zm6.01 0h-.13v-.35l-.12-.12-.12-.12h-.18V2.1l-.14-.14-.14-.14-.04.1-.03.11h-.24v.18l-.12.12-.12.13H8.35l-.04.1-.04.1-.07-.07-.08-.07.1-.04.12-.04V2.3H7.32V1.87h-.34v-.18h.34V1.86h.25V2.03h.77V1.86h.25v-.84h-.25v.25H8.17v-.25H7.75V.85H8.16V.68h-.85V.85h-.34V1.02H7.15v.25H6.98v-.25h-.25v.67H6.56v-.6l.12-.12.12-.12h.18V.68h.34V.42h.85V.6l.12.13.12.12h.11l.12.12.12.12v.6h.38l.13.17.12.17H9.6v.18l.13.12.12.13h.18V2.88zM8.25 1.02h.09V.85H8.17V1.02zm.85 1.6H9v-.16H9.18v.16zm4.46-.17h-.1l-.1-.12-.11-.12v-.18h-.26V1.86h.18l.12.12.13.12v.19h.25V2.46h-.1zm.36 0h-.08V2.3H14V2.46zm-9.7-.59H4.1V1.7h.26V1.86zm9.53 0h-.08V1.7H13.84V1.86zm.38 0h-.12V1.7h.25V1.86zM9.48 1.7h-.13v-.67h.22l.12-.17.12-.17h.39V.42h.84v.26h-.84V.85h-.35l-.12.12-.12.12v.6zm3.64 0h-.13v-.25h.26v-.35l.12-.12.12-.12h.18V.68h.6V.85h-.6v.4l.1.04.11.04-.07.08-.08.07-.04-.1-.04-.11h-.16l-.12.12-.12.12v.18zm1.01-.25h-.12V1.27h.25V1.44zM9.9 1.27h-.13v-.25h.26v.25zm1.23 0h-.09v-.25H10.62V.85h.35l.12.12.12.12v.18zM6.43.85H6.4V.68H6.56V.42H6.73V.6L6.6.73l-.13.12z"
           :fill "#a7a78f"}]
   [:path {:d "M9.05 22.27H3.1V22.1h11.93V5.08h.26V22.1h-.26V22.27zm7.24-4.4h-.42v-.26h.85v.25zm.98-.43h-.21V17.27H17.48V17.44zm-1.02-.85h-.21V16H15.87v-.6H16.04v.6h.42v.6zm.93-.33h-.12V15.84h.25V16.25zm-1.31-1.02h-.17v-.25h.34v-.34h.25v.34h-.25v.25zm1.31 0h-.12v-.25h.25v.25zm-1.01-.85h-.13V14.22h.25V14.4zm0-3.38h-.3v-.26h.6v.26zm.63 0h-.08v-.26H16.89v.26zm.38 0h-.12v-.26h.25v.26zm-1.01-1.02h-.3v-.25h.6v.25zm.63 0h-.08v-.25H16.89v.25zm.38 0h-.12v-.25h.25v.25zm-3.62-7.37h-.1l-.13-.16-.12-.17H13v-.26h.25v.18l.12.12.12.13h.18v.16zm.36 0h-.08v-.16H14v.16zm-1.18-.33h-.09v-.26h-.25V1.86h.19l.11.12.12.12v.19zm-5.59-.26h-.17V1.86h-.25V1.7h.25V1.86h.34V2.03zm2.86 0h-.2l-.1-.13-.12-.13.06-.06.06-.06.04.1.04.11h.4V2.03h-.18z"
           :fill "#9fa77f"}]
   [:path {:d "M9.4 22.7H3.08v-.18h12.19v-.25H15.45V5.08h.25v5.08h.6v.42h-.6v6.01h1.02v-.76H16.89v.6h.59V16.85h.25v.6h-.25v-.6h-.6v1.01h-.16V17.44H15.7v3.21h.16v.26H15.7v1.78zm-5.38-1.2h-.09v-.84H4.1v.85zm10.33 0h-.09v-.84H14.43v.85zm1.9-.84h-.21V20.49h.42V20.66zM2.2 17.44h-.13v-.6H.72v.43H.46v-.84h.26v.16h1.35v-.16h.25V16.85h.34v.42h-.34V17.44zm14.6-2.03h-.08v-.42H16.89V15.4zm0-.6h-.08v-.16H16.89V14.82zm-15.24-.84h-.08V13.8H1.65V13.97zm0-1.02h-.08V12.78H1.65V12.95zm15.03-1.77h-.13V8.56h.26v1.6H16.89v-1.6H17.06v1.6h.25v.42h-.25v.6H16.89v-.6H16.72v.6zM14.35 7.1h-.09v-.76H14.43v.76zM4.02 6.94h-.09V6.1H4.1v.84zm4.65-2.28H8.6V4.49H6.13V4.32h1.44v-.26h2.8v.26h1.44v-.26h.25V.42H12.23V2.3h.6V2.46h-.6v1.79l-.12.12-.12.12H9.35V4.66h-.34V4.49h-.25V4.66zm.3-.77h-1.4V3.3h2.8v.6zm.72-1.27h-.08v-.16h-.19l-.12-.13-.12-.12v-.18H9.35v.26h.18l.12.12.12.12v.09zm-4.28-.16h-.3V2.04h.26v.25h.34V2.46zm2.65-.43H8V1.9l.17-.12.17-.12v-.63L8.23.99l-.1-.04.07-.07.07-.08.04.11.04.1h.24v.68h-.22l-.12.17-.12.17zm2.82 0h-.09V1.86h.18l.12-.12.12-.12v-.59l-.1-.04-.1-.04.05-.06.06-.06.13.13.13.13v.53l-.2.2-.21.21zm-3.33-.17h-.19l-.1-.12-.11-.12V1.45l-.1-.05-.11-.05.1-.04.11-.05V1.09l.12-.12.12-.12h.35V1.02H8v.24l.1.05.1.04-.1.05-.1.05v.24h-.26V1.86h-.19zm-.02-.17h.21v-.25H8V1.27h-.26v-.25H7.32v.24l-.1.05-.11.04.1.05.1.05v.24zm2.86.17h-.15l-.1-.12-.11-.12v-.18h-.26V1.27h.26v-.18l.12-.12.12-.12h.28l.12.12.12.12v.18h.25V1.44h-.25v.19l-.12.11-.12.12zm.02-.17h.21v-.24l.1-.05.11-.05-.1-.04-.1-.05v-.24h-.43v.24l-.1.05-.11.04.1.05.1.05v.24z"}]
   [:path {:d "M3 22.7h-.08v-.18H3.09v-.25h11.93v-.16l-.1-.04-.1-.03.07-.08.07-.07.04.1.04.1h.24V5.16l.12-.12.12-.12h.19V5.08h-.26V22.27H15.28v.25H3.08V22.7zm.6-.6h-.1V21.93h.18V22.1zm1.64 0h-.12V21.93h.25V22.1zm1.61 0h-.12V21.93h.25V22.1zm1.61 0h-.12V21.93h.25V22.1zm1.65 0h-.08V21.93H10.2V22.1zm1.61 0h-.08V21.93H11.8V22.1zm1.61 0h-.08V21.93H13.42V22.1zm-9.02-.6h-.2v-.25H4.52v-.34H4.1v-.25H4.52v.25h.16v.34h-.16v.26zm9.74 0h-.21v-.25H13.67v-.34H13.84v-.25h.42v.25h-.42v.34h.42v.26zm-2.33-.25h-1.1V21.08H12.65v-.42H12.82v.6zm4.15-.17h-.17V20.91H15.87v-.24l-.1-.04-.11-.04.13-.1.12-.1-.1-.04-.1-.04v-.24h.33v1.01zm-12.28-.6h-.08v-.16H3.68V20.49zm8.13 0h-1.1v-.16H12.65v-.42H12.82v.59zm3.22 0h-.09v-.16H15.02V20.49zm-11.35-1.6h-.08v-.25H3.68v.25zm11.35 0h-.09v-.25H15.02v.25zm-12.45-.6h-.17v-.25h-.25V17.86H.72v-.25H.46v.25H.04s-.09 1.1 0-1.73v-.3h.25v.3c-.1.18.07.26.09.3h.08v.83l-.1.04-.11.03.07.08.08.07.04-.1.04-.1h.24v.16h1.6V17.27h.34v.34h-.34v.25h.34V18.28zm13.72 0h-.5v-.84h1V17.61h-.84v.25h1.02v-1.01h.59v-.42h-.6v-.6h-.16V15.41H16.89v.42H17.06v.43H17.48v-1.27h.25v1.86h-.25v.42h-.42V17.44h.67V17.61h-.25v.25h-.52l-.12.13-.12.12v.18zm-14.82-1H.72v-.43h1.35v.42zm2.2 0h-.08v-.26H3.68v.25zm11.35 0h-.09v-.26H15.02v.25zm-12.45-.43h-.17v-.26h.34v.26zm-1.1-.26H.72v-.16H.46v-1.61h.26v1.6h1.35v-.59h.25v.6h-.25v.16zm14.48 0h-.17V15.4H15.87v.6H16.04v.6zm-15.7-.93H.03V15h.25v.67zm2.03 0h-.13v-1.01h.25v1.01zm1.4 0h-.1v-.25h.18v.25zm11.34 0h-.09v-.25H15.02v.25zm2.03-.42h-.08V15l-.1-.04-.12-.05.13-.1.13-.1-.1-.03-.11-.05v-.24H16.89v.24l.1.05.1.04-.12.1-.13.1.11.04.1.04v.24zm-1.1-.25h-.17v-.34h.34v.34zm-14.1-.34h-.12v-.85H1.48V13.97h-.43V13.8H1.47v-.85h.18v-.33h.25V14.65zm14.1-.26h-.17V14.22h.34V14.4zm-12.28-.42h-.08V13.8H3.68V13.97zm11.35 0h-.09V13.8H15.02V13.97zm-11.35-1.6h-.08v-.18H3.68V12.36zm11.35 0h-.09v-.18H15.02V12.36zm1.14-1.02h-.38v-.77h.6V10.16h-.6v-1.6H15.87v1.43h.6v.76h-.6v.26h.6v.34zm.72 0h-.08V11H16.89v.34zm.35 0h-.1V11h.26v-.26h-.25V10.58h.25V10.16h-.25V9.99h.25V8.55H17.48V11.1l-.12.12-.12.13zm-13.56-.6h-.08V10.58H3.68V10.75zm11.35 0h-.09V10.58H15.02V10.75zm1.86 0h-.08V10.58H16.89V10.75zm0-.59h-.08V9.99H16.89V10.16zM3.6 9.14h-.1V8.97h.18V9.14zm11.34 0h-.09V8.97H15.02V9.14zm1.65-.59h-.13V8.3h.26v.25zm.38 0h-.08V8.3H17.06v.25zM15.8 8.3h-.09V8.13H15.87V8.3zm-12.2-.76h-.08v-.26H3.68v.26zm11.35 0h-.09v-.26H15.02v.26zm-.87-.43h-.19l-.1-.12-.11-.12v-.28l.12-.12.12-.12h.35V6.52h-.42v.42h.42V7.11h-.19zm-9.76-.17h-.2V6.7H4.52v-.34H4.1V6.1H4.52v.25h.16v.34h-.16v.25zM3.6 5.67h-.08V5.5H3.68V5.67zm1.65 0h-.12V5.5h.25V5.67zm1.61 0h-.12V5.5h.25V5.67zm1.61 0h-.12V5.5h.25V5.67zm1.65 0h-.08V5.5H10.2V5.67zm1.61 0h-.08V5.5H11.8V5.67zm1.61 0h-.08V5.5H13.42V5.67zm1.6 0h-.08V5.5H15.02V5.67zM8.9 4.66h-.13V4.49H9V4.66zm-2.84-.17h-.09V4.32H6.13v-.26H6.54l.05-.1.05-.1.05.1.05.1h.58V3.9h.25V4.31H6.13v.18zm5.04-.17h-.72v-.26h-.6V3.9h.85V4.06h.76V3.9h.18l.13.13.12.12v.18zm-3.22-.26h-.13V3.9H8V4.06zm4.06 0h-.12V.42h.25v3.64zM4.02 3.3h-.34v-.42h.42V1.87h.26v.75h.13l.12-.16.12-.17H4.94v-.26h.18V1.7h.25v.34h.34v.26h-.34v-.26h-.25v.35L5 2.5l-.12.12h-.19v.22l-.16.12-.17.13V3.3zm3.43 0h-.13v-.25h.25V2.88h.6v-.26h1.01V2.45H9.01v-.59H9.18v.35l.12.12.12.13h.11l.12.12.12.12v.18h.6V3.05h.25v.25h-.85v-.25H8v.25h-.25v-.25H7.57v.25zm6.52 0h-.3v-.25h-.18l-.12-.12-.12-.12v-.19h-.19l-.12-.12-.12-.12v-.52H12.4V2.03h.25v.26H12.23v-.6h.6v-.18l.11-.12.12-.12h.19V1.44h-.26v.85H13.2l.13.17.12.16H13.66v-.76h.18v.76H14v-.76h.25V3.3zm-6.2-1.27h-.2v-.1l.12-.12.13-.12H8v-.24l.1-.03.1-.04-.07-.08-.07-.07-.04.1-.04.1h-.24v.26H7.32v-.25H7.15v.25H6.98v-.18l.12-.12.12-.12h.35v-.25H7.74v.25H8v-.25H8.17v.25H8.34v.4l-.11.05-.1.03.07.08.07.07.04-.1.04-.1h.24v.16h-.24l-.04.1-.05.11-.1-.12-.1-.13-.03.1-.05.11zm2.8 0h-.2V1.86h.18l.12-.12.12-.12v-.19h.25v-.16h-.25v-.25h.25v.25H11.21v.4l.1.04.11.04-.16.16-.16.16-.03-.1-.04-.1h-.24v.16zm.56-.17h.08V1.7H11.04V1.86zm-.72-.17h-.21v-.25H10.03V1.27h.34v-.25h.25v.24l.1.04.11.05-.1.05-.1.05v.24zm-6.18-.42H4.1V.85h.26V1.27zm9.52 0h-.08V.85H13.84V1.27zm.38 0h-.12V.85h.25V1.27zM6.64.85h-.08V.68H6.73V.85zm1.31 0h-.2V.68H8.16V.85zm2.88 0h-.2V.68H11.03V.85zm.68 0h-.13V.68h.26V.85z"
           :fill "#696953"}]])
               
(defn controls []
  [:svg {:width "100%" :view-box "0 0 64 32"}
   [robot]
   [:g {:transform "scale(0.64,1) translate(36,0)"}
    [:path {:d "M63.5 2V14L62 15.5H2L0.5 14V2L2 0.5H62Z"
            :fill "none"
            :stroke-width 0.5
            :stroke "black"}]
    [:path {:d "M62 3V13L61 14H3L2 13V3L3 2H61Z"
            :fill "none"
            :stroke-width 0.25
            :stroke "black"}]]
   [key/circle-of-fifths]])

(defn note-blocks []
  [:g#notes {:transform "scale(0.2) translate(-36,0)"}
   [notation/note-button "whole" 128]
   [notation/note-button "dotted-half" 144]
   [notation/note-button "half" 160]
   [notation/note-button "dotted-quarter" 176]
   [notation/note-button 1 192]
   [notation/note-button "dotted-eighth" 208]
   [notation/note-button "q-triplets" 224]
   [notation/note-button 0.5 240]
   [notation/note-button "dotted-sixteenth" 256]
   [notation/note-button "e-triplets" 272]
   [notation/note-button "sixteenth" 288]])

(defn rest-blocks []
  [:g#rests {:transform "scale(0.2) translate(-36,16)"}
   [notation/note-button "whole-rest" 128]
   [notation/note-button "half-rest" 160]
   [notation/note-button "quarter-rest" 208]
   [notation/note-button "eighth-rest" 240]
   [notation/note-button "sixteenth-rest" 288]])
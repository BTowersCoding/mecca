(ns mecca.graph
  (:require  [goog.object :as o]
             [goog.crypt :as crypt]
             [reagent.core :as r]
             [re-frame.core :as rf :refer [subscribe dispatch]]))

(def wave-button 
  [
   ;["#000" "M0 0h260M0 1h260M0 2h260M0 3h260M0 4h260M0 5h260M0 6h260M0 7h260M0 8h260M0 9h9m243 0h8M0 10h9m243 0h8M0 11h9m243 0h8M0 12h9m243 0h8M0 13h9m243 0h8M0 14h9m243 0h8M0 15h9m243 0h8M0 16h9m243 0h8M0 17h9m243 0h8M0 18h9m243 0h8M0 19h9m243 0h8M0 20h9m243 0h8M0 21h9m243 0h8M0 22h9m243 0h8M0 23h9m243 0h8M0 24h9m243 0h8M0 25h9m243 0h8M0 26h9m243 0h8M0 27h9m243 0h8M0 28h9m243 0h8M0 29h9m243 0h8M0 30h9m243 0h8M0 31h9m243 0h8M0 32h9m243 0h8M0 33h9m243 0h8M0 34h9m243 0h8M0 35h9m243 0h8M0 36h9m243 0h8M0 37h9m243 0h8M0 38h9m243 0h8M0 39h9m243 0h8M0 40h9m243 0h8M0 41h9m243 0h8M0 42h9m243 0h8M0 43h9m243 0h8M0 44h9m243 0h8M0 45h9m243 0h8M0 46h9m243 0h8M0 47h9m243 0h8M0 48h9m243 0h8M0 49h9m243 0h8M0 50h9m243 0h8M0 51h9m243 0h8M0 52h9m243 0h8M0 53h9m243 0h8M0 54h9m243 0h8M0 55h9m243 0h8M0 56h9m243 0h8M0 57h9m243 0h8M0 58h9m243 0h8M0 59h9m243 0h8M0 60h9m243 0h8M0 61h9m243 0h8M0 62h9m243 0h8M0 63h9m243 0h8M0 64h9m243 0h8M0 65h9m243 0h8M0 66h9m243 0h8M0 67h9m243 0h8M0 68h9m243 0h8M0 69h9m243 0h8M0 70h9m243 0h8M0 71h9m243 0h8M0 72h9m243 0h8M0 73h9m243 0h8M0 74h9m243 0h8M0 75h9m243 0h8M0 76h9m243 0h8M0 77h9m243 0h8M0 78h9m243 0h8M0 79h9m243 0h8M0 80h9m243 0h8M0 81h9m243 0h8M0 82h5m1 0h3m243 0h8M0 83h5m1 0h3m243 0h8M0 84h5m2 0h2m243 0h8M0 85h5m2 0h2m243 0h8M1 86h4m2 0h2m243 0h8M1 87h4m2 0h2m243 0h8M1 88h2m4 0h1m244 0h8M2 89h1m4 0h1m244 0h8M2 90h1m249 0h8M2 91h1m249 0h6m-6 1h6m-6 1h4m1 0h1m-1 1h1m-5 4h1m-2 1h6m-6 1h6m-6 1h6M2 102h1m5 0h1m243 0h8M2 103h1m5 0h1m243 0h8M2 104h1m2 0h1m2 0h1m243 0h8M2 105h2m1 0h1m2 0h1m243 0h8M1 106h3m1 0h1m2 0h1m243 0h8M1 107h3m1 0h1m2 0h1m243 0h8M1 108h3m1 0h2m1 0h1m243 0h8M0 109h4m1 0h4m243 0h8M0 110h4m1 0h4m243 0h8M0 111h4m1 0h4m243 0h8M0 112h4m1 0h4m243 0h8M0 113h9m243 0h8M0 114h9m243 0h8M0 115h9m243 0h8M0 116h9m243 0h8M0 117h9m243 0h8M0 118h9m243 0h8M0 119h9m243 0h8M0 120h9m243 0h8M0 121h9m243 0h8M0 122h9m243 0h8M0 123h9m243 0h8M0 124h9m243 0h8M0 125h9m243 0h8M0 126h9m243 0h8M0 127h9m243 0h8M0 128h9m243 0h8M0 129h9m243 0h8M0 130h9m243 0h8M0 131h9m243 0h8M0 132h9m243 0h8M0 133h9m243 0h8M0 134h9m243 0h8M0 135h9m243 0h8M0 136h9m243 0h8M0 137h9m243 0h8M0 138h9m243 0h8M0 139h9m243 0h8M0 140h9m243 0h8M0 141h9m243 0h8M0 142h9m243 0h8M0 143h9m243 0h8M0 144h9m243 0h8M0 145h9m243 0h8M0 146h9m243 0h8M0 147h9m243 0h8M0 148h9m243 0h8M0 149h9m243 0h8M0 150h9m243 0h8M0 151h9m243 0h8M0 152h9m243 0h8M0 153h9m243 0h8M0 154h9m243 0h8M0 155h9m243 0h8M0 156h9m243 0h8M0 157h9m243 0h8M0 158h9m243 0h8M0 159h9m243 0h8M0 160h9m243 0h8M0 161h9m243 0h8M0 162h9m243 0h8M0 163h9m243 0h8M0 164h9m243 0h8M0 165h9m243 0h8M0 166h9m243 0h8M0 167h9m243 0h8M0 168h9m243 0h8M0 169h9m243 0h8M0 170h9m243 0h8M0 171h9m243 0h8M0 172h9m243 0h8M0 173h9m243 0h8M0 174h9m243 0h8M0 175h9m243 0h8M0 176h9m243 0h8M0 177h9m243 0h8M0 178h9m243 0h8M0 179h9m243 0h8M0 180h9m243 0h8M0 181h9m243 0h8M0 182h9m243 0h8M0 183h9m243 0h8M0 184h9m243 0h8M0 185h9m243 0h8M0 186h9m243 0h8M0 187h9m243 0h8M0 188h25m1 0h234M0 189h25m1 0h234M0 190h25m1 0h234M0 191h25m1 0h234M0 192h25m1 0h234M0 193h260M0 194h260M0 195h260M0 196h260M0 197h260"]
  ;["#20e080" "M9 9h243M9 10h243M9 11h243M9 12h243M9 13h243M9 14h17m1 0h225M9 15h17m1 0h225M9 16h17m1 0h225M9 17h17m1 0h225M9 18h17m1 0h225M9 19h17m1 0h225M9 20h17m1 0h225M9 21h17m1 0h225M9 22h17m1 0h225M9 23h17m1 0h225M9 24h17m1 0h225M9 25h17m1 0h225M9 26h17m1 0h225M9 27h17m1 0h225M9 28h17m1 0h225M9 29h17m1 0h225M9 30h17m1 0h225M9 31h17m1 0h225M9 32h17m1 0h225M9 33h17m1 0h225M9 34h17m1 0h225M9 35h17m1 0h64m1 0h160M9 36h17m1 0h64m1 0h160M9 37h17m1 0h64m1 0h160M9 38h17m1 0h64m1 0h160M9 39h17m1 0h64m1 0h160M9 40h17m1 0h64m1 0h160M9 41h17m1 0h64m1 0h160M9 42h17m1 0h64m1 0h160M9 43h17m1 0h64m1 0h160M9 44h17m1 0h64m1 0h160M9 45h17m1 0h64m1 0h160M9 46h17m1 0h64m1 0h160M9 47h17m1 0h64m1 0h160M9 48h17m1 0h64m1 0h160M9 49h17m1 0h64m1 0h160M9 50h17m1 0h64m1 0h160M9 51h17m1 0h64m1 0h1m1 0h158M9 52h17m1 0h64m1 0h1m1 0h158M9 53h17m1 0h64m1 0h1m1 0h158M9 54h17m1 0h64m1 0h1m1 0h158M9 55h17m1 0h64m1 0h1m1 0h158M9 56h17m1 0h64m1 0h1m1 0h158M9 57h17m1 0h9m1 0h54m1 0h1m1 0h158M9 58h17m1 0h9m1 0h2m1 0h28m1 0h22m1 0h1m1 0h158M9 59h17m1 0h9m1 0h2m1 0h28m1 0h22m1 0h1m1 0h1m1 0h156M9 60h17m1 0h9m1 0h2m1 0h28m1 0h22m1 0h1m1 0h1m1 0h156M9 61h17m1 0h9m4 0h28m1 0h22m1 0h1m1 0h1m1 0h156M9 62h17m1 0h9m5 0h27m1 0h22m1 0h1m1 0h1m1 0h156M9 63h17m1 0h9m5 0h27m1 0h22m1 0h1m1 0h1m1 0h156M9 64h17m1 0h9m5 0h27m1 0h22m1 0h1m3 0h118m1 0h37M9 65h17m1 0h8m6 0h27m1 0h22m1 0h1m3 0h118m1 0h37M9 66h17m1 0h8m7 0h13m1 0h12m1 0h22m1 0h1m3 0h118m1 0h37M9 67h17m1 0h8m7 0h13m1 0h12m1 0h6m1 0h15m1 0h1m3 0h118m1 0h37M9 68h17m1 0h8m7 0h13m1 0h12m1 0h6m1 0h15m1 0h1m3 0h118m1 0h37M9 69h17m1 0h8m7 0h13m1 0h10m1 0h1m1 0h6m2 0h14m1 0h1m3 0h116m1 0h1m1 0h37M9 70h17m1 0h8m8 0h7m1 0h4m1 0h10m1 0h1m1 0h6m3 0h13m1 0h1m3 0h116m1 0h1m1 0h37M9 71h17m1 0h8m8 0h7m1 0h4m1 0h10m1 0h1m1 0h6m3 0h13m1 0h1m3 0h116m1 0h1m1 0h37M9 72h17m1 0h7m10 0h6m1 0h4m1 0h10m1 0h1m1 0h6m3 0h13m1 0h1m3 0h32m1 0h42m1 0h40m1 0h1m1 0h37M9 73h17m1 0h7m10 0h6m1 0h4m1 0h10m1 0h1m2 0h5m3 0h13m5 0h14m1 0h17m1 0h40m1 0h1m1 0h15m1 0h24m1 0h1m1 0h37M9 74h17m1 0h7m11 0h5m1 0h4m1 0h10m1 0h1m3 0h4m3 0h13m5 0h14m1 0h16m2 0h40m1 0h1m1 0h15m1 0h24m1 0h1m1 0h37M9 75h16m2 0h7m11 0h5m1 0h4m1 0h10m1 0h1m3 0h3m4 0h13m5 0h1m1 0h12m2 0h15m2 0h40m1 0h1m1 0h15m1 0h24m1 0h1m1 0h37M9 76h16m2 0h7m11 0h1m1 0h3m1 0h4m1 0h10m1 0h1m4 0h2m4 0h13m5 0h1m1 0h12m2 0h13m4 0h40m1 0h1m1 0h14m2 0h24m1 0h1m1 0h37M9 77h16m2 0h7m13 0h3m1 0h4m1 0h10m1 0h1m4 0h2m4 0h13m5 0h1m1 0h1m1 0h10m2 0h13m4 0h37m1 0h1m2 0h1m1 0h14m2 0h24m1 0h1m1 0h37M9 78h16m2 0h6m14 0h3m1 0h4m1 0h10m1 0h1m4 0h1m5 0h13m7 0h1m1 0h9m4 0h12m4 0h31m2 0h4m4 0h1m1 0h14m2 0h24m1 0h1m1 0h37M9 79h4m1 0h11m2 0h6m14 0h3m2 0h2m2 0h10m6 0h1m5 0h13m7 0h1m1 0h2m1 0h6m5 0h11m5 0h30m3 0h3m4 0h1m1 0h14m3 0h23m1 0h1m1 0h2m1 0h34M9 80h4m2 0h10m2 0h6m14 0h3m2 0h2m2 0h10m6 0h1m5 0h13m7 0h1m2 0h1m2 0h5m5 0h11m6 0h29m3 0h1m6 0h1m1 0h14m4 0h22m1 0h1m1 0h2m1 0h24m1 0h9M9 81h4m2 0h10m2 0h1m1 0h3m16 0h2m2 0h2m2 0h10m6 0h1m5 0h13m7 0h1m2 0h1m2 0h5m6 0h10m6 0h14m1 0h14m10 0h1m1 0h14m4 0h22m1 0h1m1 0h1m2 0h21m1 0h2m1 0h9M5 82h1m3 0h4m2 0h10m2 0h1m1 0h3m16 0h2m2 0h2m4 0h8m6 0h1m6 0h12m7 0h1m2 0h1m3 0h3m8 0h8m7 0h14m2 0h12m11 0h1m1 0h14m4 0h22m1 0h1m1 0h1m3 0h20m1 0h2m1 0h9M5 83h1m3 0h1m1 0h2m2 0h10m2 0h1m1 0h3m16 0h2m2 0h2m4 0h8m6 0h1m6 0h12m10 0h1m3 0h2m9 0h2m1 0h5m7 0h7m1 0h6m3 0h10m12 0h1m1 0h11m1 0h2m4 0h22m1 0h1m1 0h1m3 0h20m1 0h1m2 0h9M5 84h2m2 0h1m1 0h2m2 0h10m2 0h1m1 0h3m16 0h2m2 0h2m4 0h8m6 0h1m7 0h11m10 0h1m3 0h2m9 0h2m1 0h2m2 0h1m7 0h7m1 0h4m1 0h1m5 0h8m12 0h1m2 0h10m1 0h2m4 0h9m1 0h12m1 0h1m1 0h1m3 0h20m1 0h1m2 0h1m1 0h7M5 85h2m2 0h1m1 0h2m2 0h10m2 0h1m2 0h1m17 0h2m2 0h1m6 0h7m6 0h1m7 0h11m10 0h1m3 0h1m11 0h1m1 0h2m2 0h1m7 0h7m2 0h3m1 0h1m6 0h7m12 0h1m2 0h8m1 0h1m1 0h2m5 0h5m1 0h1m2 0h12m1 0h1m1 0h1m3 0h20m1 0h1m4 0h7M0 86h1m4 0h2m2 0h1m2 0h1m2 0h10m2 0h1m2 0h1m17 0h2m2 0h1m6 0h7m14 0h7m2 0h2m10 0h1m3 0h1m11 0h1m1 0h1m3 0h1m8 0h6m2 0h2m2 0h1m8 0h5m15 0h8m1 0h1m1 0h2m5 0h5m4 0h1m1 0h10m1 0h1m1 0h1m3 0h19m8 0h6M0 87h1m4 0h2m2 0h1m2 0h1m2 0h10m2 0h1m2 0h1m17 0h2m2 0h1m6 0h7m14 0h7m2 0h2m10 0h1m3 0h1m11 0h1m1 0h1m3 0h1m8 0h6m2 0h1m13 0h3m16 0h8m3 0h1m6 0h5m4 0h1m1 0h10m8 0h11m3 0h4m8 0h6M0 88h1m2 0h4m1 0h2m5 0h2m1 0h7m2 0h1m2 0h1m17 0h2m9 0h7m14 0h6m3 0h2m10 0h1m3 0h1m11 0h1m1 0h1m12 0h6m2 0h1m13 0h1m18 0h8m10 0h5m4 0h1m1 0h10m8 0h6m1 0h1m2 0h1m3 0h3m9 0h6M0 89h2m1 0h4m1 0h2m5 0h1m2 0h7m2 0h1m2 0h1m18 0h1m9 0h7m14 0h6m4 0h1m10 0h1m15 0h1m14 0h6m2 0h1m13 0h1m18 0h8m10 0h3m1 0h1m4 0h1m1 0h10m8 0h6m1 0h1m2 0h1m3 0h3m9 0h6M0 90h2m1 0h6m6 0h1m2 0h7m2 0h1m2 0h1m29 0h6m14 0h6m4 0h1m26 0h1m14 0h5m17 0h1m18 0h7m11 0h3m1 0h1m4 0h1m1 0h9m9 0h6m4 0h1m3 0h1m1 0h1m9 0h2m2 0h2M0 91h2m1 0h6m9 0h7m2 0h1m2 0h1m29 0h5m15 0h4m1 0h1m46 0h5m17 0h1m18 0h7m11 0h3m6 0h1m1 0h9m9 0h6m4 0h1m3 0h1m1 0h1m9 0h2m2 0h2m6 0h2M0 92h9m9 0h7m2 0h1m2 0h1m29 0h5m15 0h4m1 0h1m48 0h3m17 0h1m18 0h7m12 0h2m10 0h7m9 0h1m1 0h4m10 0h1m10 0h1m2 0h2m6 0h2M0 93h9m11 0h5m2 0h1m33 0h4m17 0h2m1 0h1m48 0h1m1 0h1m36 0h4m1 0h2m12 0h2m10 0h7m11 0h1m13 0h1m10 0h1m2 0h1m5 0h1m1 0h2M0 94h9m11 0h5m2 0h1m34 0h2m19 0h1m1 0h1m88 0h3m1 0h1m13 0h1m11 0h1m1 0h3m1 0h1m36 0h1m2 0h1m1 0h5m1 0h2M0 95h9m11 0h5m2 0h1m147 0h1m76 0h8M0 96h9m18 0h1m224 0h8M0 97h9m12 0h4m2 0h1m148 0h1m75 0h8M0 98h9m10 0h6m2 0h1m33 0h3m17 0h1m1 0h1m1 0h1m49 0h1m38 0h3m1 0h1m13 0h1m10 0h1m2 0h1m1 0h2m37 0h1m4 0h1m1 0h6M0 99h9m10 0h6m2 0h1m33 0h3m16 0h4m1 0h1m49 0h2m37 0h6m12 0h2m9 0h1m1 0h6m11 0h1m24 0h1m1 0h1m1 0h1m6 0h2M0 100h9m10 0h6m2 0h1m32 0h5m15 0h6m48 0h3m35 0h8m12 0h2m8 0h9m10 0h6m10 0h1m9 0h5m6 0h2M0 101h9m10 0h6m35 0h5m15 0h6m48 0h4m34 0h8m12 0h2m8 0h9m10 0h6m9 0h2m8 0h6m6 0h2M0 102h2m1 0h5m8 0h1m2 0h6m3 0h1m22 0h1m8 0h5m15 0h6m47 0h5m10 0h1m4 0h1m18 0h9m10 0h3m8 0h9m10 0h6m3 0h1m3 0h1m1 0h2m8 0h6M0 103h2m1 0h5m8 0h1m1 0h7m3 0h2m21 0h1m1 0h1m6 0h5m15 0h7m3 0h1m2 0h1m11 0h1m27 0h5m9 0h2m4 0h1m10 0h1m7 0h10m9 0h3m1 0h1m5 0h11m7 0h1m1 0h6m3 0h1m3 0h4m8 0h6M0 104h2m1 0h2m1 0h2m6 0h1m1 0h9m3 0h2m21 0h1m1 0h1m5 0h6m1 0h1m13 0h7m2 0h2m2 0h1m11 0h1m10 0h3m14 0h5m5 0h1m3 0h2m3 0h3m9 0h1m7 0h10m9 0h3m1 0h1m3 0h1m1 0h11m7 0h10m1 0h2m2 0h4m8 0h6M0 105h2m2 0h1m1 0h2m1 0h1m4 0h1m1 0h9m3 0h2m19 0h1m1 0h1m1 0h1m5 0h6m1 0h1m13 0h7m2 0h2m2 0h1m11 0h1m6 0h1m3 0h3m1 0h1m12 0h6m4 0h1m3 0h2m1 0h7m7 0h1m7 0h10m4 0h1m4 0h5m3 0h1m1 0h11m7 0h19m3 0h1m4 0h6M0 106h1m3 0h1m1 0h2m1 0h1m4 0h1m1 0h9m3 0h2m19 0h1m1 0h1m1 0h1m5 0h6m1 0h1m13 0h11m2 0h1m11 0h1m6 0h1m3 0h3m1 0h2m11 0h7m1 0h1m1 0h1m2 0h12m6 0h1m7 0h11m3 0h2m3 0h5m3 0h13m7 0h19m1 0h1m1 0h1m4 0h6M0 107h1m3 0h1m1 0h2m1 0h1m1 0h1m2 0h1m1 0h9m3 0h4m17 0h1m1 0h1m1 0h1m5 0h6m1 0h1m4 0h1m7 0h12m2 0h1m11 0h1m6 0h1m3 0h3m1 0h2m1 0h1m8 0h12m2 0h12m6 0h1m6 0h14m1 0h2m3 0h5m2 0h14m7 0h19m1 0h1m1 0h1m4 0h6M0 108h1m3 0h1m2 0h1m1 0h4m1 0h1m1 0h9m3 0h4m16 0h2m1 0h1m1 0h1m1 0h1m1 0h1m1 0h6m1 0h1m4 0h1m7 0h12m2 0h1m11 0h1m6 0h1m3 0h3m1 0h2m1 0h1m6 0h14m2 0h12m6 0h1m6 0h14m1 0h2m3 0h5m1 0h15m4 0h1m2 0h19m1 0h1m1 0h1m4 0h6M4 109h1m4 0h16m3 0h4m16 0h2m1 0h1m1 0h1m1 0h1m1 0h1m1 0h6m1 0h1m4 0h1m7 0h12m2 0h1m10 0h2m6 0h1m2 0h4m1 0h4m4 0h1m1 0h14m2 0h12m6 0h1m6 0h14m1 0h2m2 0h6m1 0h15m4 0h1m1 0h20m1 0h1m1 0h1m2 0h8M4 110h1m4 0h16m3 0h4m16 0h2m1 0h3m1 0h1m1 0h1m1 0h8m4 0h1m7 0h12m2 0h1m10 0h2m1 0h1m4 0h1m2 0h9m4 0h1m1 0h14m1 0h15m4 0h1m6 0h14m1 0h2m1 0h23m2 0h1m1 0h1m1 0h20m1 0h1m1 0h1m2 0h8M4 111h1m4 0h16m3 0h4m15 0h3m1 0h3m1 0h1m1 0h10m4 0h1m5 0h1m1 0h12m2 0h1m8 0h6m4 0h1m1 0h10m4 0h1m1 0h30m4 0h1m5 0h18m1 0h23m2 0h1m1 0h1m1 0h20m1 0h1m1 0h1m2 0h8M4 112h1m4 0h16m3 0h4m15 0h3m1 0h3m1 0h1m1 0h10m4 0h1m5 0h1m1 0h12m2 0h1m8 0h6m4 0h1m1 0h10m3 0h2m1 0h30m4 0h1m5 0h18m1 0h23m2 0h26m1 0h1m2 0h8M9 113h16m1 0h1m1 0h4m15 0h3m1 0h5m1 0h10m4 0h1m5 0h1m1 0h12m2 0h1m3 0h1m1 0h1m2 0h7m3 0h12m2 0h34m3 0h2m4 0h19m1 0h23m2 0h26m1 0h2m1 0h8M9 114h16m1 0h1m1 0h4m14 0h4m1 0h5m1 0h10m1 0h1m2 0h3m3 0h1m1 0h12m2 0h1m3 0h1m1 0h1m2 0h7m1 0h14m2 0h34m3 0h3m3 0h19m1 0h23m2 0h26m1 0h11M9 115h16m1 0h1m1 0h4m13 0h5m1 0h16m1 0h1m2 0h4m2 0h1m1 0h12m2 0h1m3 0h1m1 0h1m2 0h7m1 0h14m2 0h34m3 0h3m3 0h43m2 0h26m1 0h11M9 116h16m1 0h1m1 0h5m12 0h5m1 0h16m1 0h1m1 0h5m2 0h1m1 0h12m2 0h1m3 0h1m1 0h1m2 0h22m2 0h35m1 0h4m3 0h43m1 0h27m1 0h11M9 117h16m1 0h1m1 0h5m1 0h1m6 0h1m2 0h6m1 0h16m1 0h1m1 0h5m2 0h1m1 0h12m2 0h1m3 0h1m1 0h2m1 0h22m2 0h41m2 0h43m1 0h27m1 0h11M9 118h16m1 0h1m1 0h5m1 0h2m5 0h1m2 0h6m1 0h16m1 0h1m1 0h5m2 0h14m2 0h1m3 0h1m1 0h25m2 0h42m1 0h43m1 0h39M9 119h16m1 0h1m1 0h5m1 0h2m5 0h1m2 0h6m1 0h16m1 0h1m1 0h6m1 0h14m2 0h1m2 0h2m1 0h25m2 0h86m1 0h39M9 120h16m1 0h1m1 0h8m3 0h1m1 0h9m1 0h16m1 0h1m1 0h21m2 0h1m2 0h28m2 0h86m1 0h39M9 121h16m1 0h1m1 0h8m3 0h11m1 0h16m1 0h1m1 0h21m2 0h1m2 0h28m2 0h126M9 122h16m1 0h1m1 0h8m3 0h11m1 0h16m1 0h23m2 0h1m1 0h29m2 0h126M9 123h16m1 0h1m1 0h8m3 0h11m1 0h16m1 0h23m2 0h1m1 0h30m1 0h126M9 124h16m1 0h1m1 0h9m1 0h12m1 0h16m1 0h23m2 0h1m1 0h30m1 0h126M9 125h16m1 0h1m1 0h9m1 0h12m1 0h16m1 0h23m2 0h1m1 0h30m1 0h126M9 126h16m1 0h1m1 0h9m1 0h29m1 0h23m2 0h1m1 0h30m1 0h126M9 127h16m1 0h1m1 0h39m1 0h23m2 0h1m1 0h157M9 128h16m1 0h41m1 0h23m2 0h1m1 0h157M9 129h16m1 0h41m1 0h23m2 0h1m1 0h157M9 130h16m1 0h41m1 0h23m2 0h1m1 0h157M9 131h16m1 0h41m1 0h23m2 0h1m1 0h157M9 132h16m1 0h41m1 0h23m2 0h1m1 0h157M9 133h16m1 0h41m1 0h23m2 0h1m1 0h157M9 134h16m1 0h65m2 0h1m1 0h157M9 135h16m1 0h65m2 0h1m1 0h157M9 136h16m1 0h65m2 0h1m1 0h157M9 137h16m1 0h65m2 0h1m1 0h157M9 138h16m1 0h65m2 0h1m1 0h157M9 139h16m1 0h65m2 0h1m1 0h157M9 140h16m1 0h65m2 0h1m1 0h157M9 141h16m1 0h65m2 0h1m1 0h157M9 142h16m1 0h65m1 0h2m1 0h157M9 143h16m1 0h65m1 0h2m1 0h157M9 144h16m1 0h65m1 0h2m1 0h157M9 145h16m1 0h65m1 0h2m1 0h157M9 146h16m1 0h65m1 0h2m1 0h157M9 147h16m1 0h65m1 0h2m1 0h157M9 148h16m1 0h65m1 0h2m1 0h157M9 149h16m1 0h65m1 0h2m1 0h157M9 150h16m1 0h68m1 0h157M9 151h16m1 0h68m1 0h157M9 152h16m1 0h68m1 0h157M9 153h16m1 0h68m1 0h157M9 154h16m1 0h68m1 0h157M9 155h16m1 0h68m1 0h157M9 156h16m1 0h68m1 0h157M9 157h16m1 0h68m1 0h157M9 158h16m1 0h68m1 0h157M9 159h16m1 0h68m1 0h157M9 160h16m1 0h68m1 0h157M9 161h16m1 0h68m1 0h157M9 162h16m1 0h68m1 0h157M9 163h16m1 0h68m1 0h157M9 164h16m1 0h226M9 165h16m1 0h226M9 166h16m1 0h226M9 167h16m1 0h226M9 168h16m1 0h226M9 169h16m1 0h226M9 170h16m1 0h226M9 171h16m1 0h226M9 172h16m1 0h226M9 173h16m1 0h226M9 174h16m1 0h226M9 175h16m1 0h226M9 176h16m1 0h226M9 177h16m1 0h226M9 178h16m1 0h226M9 179h16m1 0h226M9 180h16m1 0h226M9 181h16m1 0h226M9 182h16m1 0h226M9 183h16m1 0h226M9 184h16m1 0h226M9 185h16m1 0h226M9 186h16m1 0h226M9 187h16m1 0h226m-227 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1"]
  ["#7F00FF" "M26 14h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m64 0h1m-66 1h1m64 0h1m-66 1h1m64 0h1m-66 1h1m64 0h1m-66 1h1m64 0h1m-66 1h1m64 0h1m-66 1h1m64 0h1m-66 1h1m64 0h1m-66 1h1m64 0h1m-66 1h1m64 0h1m-66 1h1m64 0h1m-66 1h1m64 0h1m-66 1h1m64 0h1m-66 1h1m64 0h1m-66 1h1m64 0h1m-66 1h1m64 0h1m-66 1h1m64 0h1m1 0h1m-68 1h1m64 0h1m1 0h1m-68 1h1m64 0h1m1 0h1m-68 1h1m64 0h1m1 0h1m-68 1h1m64 0h1m1 0h1m-68 1h1m64 0h1m1 0h1m-68 1h1m9 0h1m54 0h1m1 0h1m-68 1h1m9 0h1m2 0h1m28 0h1m22 0h1m1 0h1m-68 1h1m9 0h1m2 0h1m28 0h1m22 0h1m1 0h1m1 0h1m-70 1h1m9 0h1m2 0h1m28 0h1m22 0h1m1 0h1m1 0h1m-70 1h1m9 0h4m28 0h1m22 0h1m1 0h1m1 0h1m-70 1h1m9 0h5m27 0h1m22 0h1m1 0h1m1 0h1m-70 1h1m9 0h5m27 0h1m22 0h1m1 0h1m1 0h1m-70 1h1m9 0h5m27 0h1m22 0h1m1 0h3m118 0h1M26 65h1m8 0h6m27 0h1m22 0h1m1 0h3m118 0h1M26 66h1m8 0h7m13 0h1m12 0h1m22 0h1m1 0h3m118 0h1M26 67h1m8 0h7m13 0h1m12 0h1m6 0h1m15 0h1m1 0h3m118 0h1M26 68h1m8 0h7m13 0h1m12 0h1m6 0h1m15 0h1m1 0h3m118 0h1M26 69h1m8 0h7m13 0h1m10 0h1m1 0h1m6 0h2m14 0h1m1 0h3m116 0h1m1 0h1M26 70h1m8 0h8m7 0h1m4 0h1m10 0h1m1 0h1m6 0h3m13 0h1m1 0h3m116 0h1m1 0h1M26 71h1m8 0h8m7 0h1m4 0h1m10 0h1m1 0h1m6 0h3m13 0h1m1 0h3m116 0h1m1 0h1M26 72h1m7 0h10m6 0h1m4 0h1m10 0h1m1 0h1m6 0h3m13 0h1m1 0h3m32 0h1m42 0h1m40 0h1m1 0h1M26 73h1m7 0h10m6 0h1m4 0h1m10 0h1m1 0h2m5 0h3m13 0h5m14 0h1m17 0h1m40 0h1m1 0h1m15 0h1m24 0h1m1 0h1M26 74h1m7 0h11m5 0h1m4 0h1m10 0h1m1 0h3m4 0h3m13 0h5m14 0h1m16 0h2m40 0h1m1 0h1m15 0h1m24 0h1m1 0h1M25 75h2m7 0h11m5 0h1m4 0h1m10 0h1m1 0h3m3 0h4m13 0h5m1 0h1m12 0h2m15 0h2m40 0h1m1 0h1m15 0h1m24 0h1m1 0h1M25 76h2m7 0h11m1 0h1m3 0h1m4 0h1m10 0h1m1 0h4m2 0h4m13 0h5m1 0h1m12 0h2m13 0h4m40 0h1m1 0h1m14 0h2m24 0h1m1 0h1M25 77h2m7 0h13m3 0h1m4 0h1m10 0h1m1 0h4m2 0h4m13 0h5m1 0h1m1 0h1m10 0h2m13 0h4m37 0h1m1 0h2m1 0h1m14 0h2m24 0h1m1 0h1M25 78h2m6 0h14m3 0h1m4 0h1m10 0h1m1 0h4m1 0h5m13 0h7m1 0h1m9 0h4m12 0h4m31 0h2m4 0h4m1 0h1m14 0h2m24 0h1m1 0h1M13 79h1m11 0h2m6 0h14m3 0h2m2 0h2m10 0h6m1 0h5m13 0h7m1 0h1m2 0h1m6 0h5m11 0h5m30 0h3m3 0h4m1 0h1m14 0h3m23 0h1m1 0h1m2 0h1M13 80h2m10 0h2m6 0h14m3 0h2m2 0h2m10 0h6m1 0h5m13 0h7m1 0h2m1 0h2m5 0h5m11 0h6m29 0h3m1 0h6m1 0h1m14 0h4m22 0h1m1 0h1m2 0h1m24 0h1M13 81h2m10 0h2m1 0h1m3 0h16m2 0h2m2 0h2m10 0h6m1 0h5m13 0h7m1 0h2m1 0h2m5 0h6m10 0h6m14 0h1m14 0h10m1 0h1m14 0h4m22 0h1m1 0h1m1 0h2m21 0h1m2 0h1M13 82h2m10 0h2m1 0h1m3 0h16m2 0h2m2 0h4m8 0h6m1 0h6m12 0h7m1 0h2m1 0h3m3 0h8m8 0h7m14 0h2m12 0h11m1 0h1m14 0h4m22 0h1m1 0h1m1 0h3m20 0h1m2 0h1M10 83h1m2 0h2m10 0h2m1 0h1m3 0h16m2 0h2m2 0h4m8 0h6m1 0h6m12 0h10m1 0h3m2 0h9m2 0h1m5 0h7m7 0h1m6 0h3m10 0h12m1 0h1m11 0h1m2 0h4m22 0h1m1 0h1m1 0h3m20 0h1m1 0h2M10 84h1m2 0h2m10 0h2m1 0h1m3 0h16m2 0h2m2 0h4m8 0h6m1 0h7m11 0h10m1 0h3m2 0h9m2 0h1m2 0h2m1 0h7m7 0h1m4 0h1m1 0h5m8 0h12m1 0h2m10 0h1m2 0h4m9 0h1m12 0h1m1 0h1m1 0h3m20 0h1m1 0h2m1 0h1M10 85h1m2 0h2m10 0h2m1 0h2m1 0h17m2 0h2m1 0h6m7 0h6m1 0h7m11 0h10m1 0h3m1 0h11m1 0h1m2 0h2m1 0h7m7 0h2m3 0h1m1 0h6m7 0h12m1 0h2m8 0h1m1 0h1m2 0h5m5 0h1m1 0h2m12 0h1m1 0h1m1 0h3m20 0h1m1 0h4M10 86h2m1 0h2m10 0h2m1 0h2m1 0h17m2 0h2m1 0h6m7 0h14m7 0h2m2 0h10m1 0h3m1 0h11m1 0h1m1 0h3m1 0h8m6 0h2m2 0h2m1 0h8m5 0h15m8 0h1m1 0h1m2 0h5m5 0h4m1 0h1m10 0h1m1 0h1m1 0h3m19 0h8M10 87h2m1 0h2m10 0h2m1 0h2m1 0h17m2 0h2m1 0h6m7 0h14m7 0h2m2 0h10m1 0h3m1 0h11m1 0h1m1 0h3m1 0h8m6 0h2m1 0h13m3 0h16m8 0h3m1 0h6m5 0h4m1 0h1m10 0h8m11 0h3m4 0h8M10 88h5m2 0h1m7 0h2m1 0h2m1 0h17m2 0h9m7 0h14m6 0h3m2 0h10m1 0h3m1 0h11m1 0h1m1 0h12m6 0h2m1 0h13m1 0h18m8 0h10m5 0h4m1 0h1m10 0h8m6 0h1m1 0h2m1 0h3m3 0h9M10 89h5m1 0h2m7 0h2m1 0h2m1 0h18m1 0h9m7 0h14m6 0h4m1 0h10m1 0h15m1 0h14m6 0h2m1 0h13m1 0h18m8 0h10m3 0h1m1 0h4m1 0h1m10 0h8m6 0h1m1 0h2m1 0h3m3 0h9M9 90h6m1 0h2m7 0h2m1 0h2m1 0h29m6 0h14m6 0h4m1 0h26m1 0h14m5 0h17m1 0h18m7 0h11m3 0h1m1 0h4m1 0h1m9 0h9m6 0h4m1 0h3m1 0h1m1 0h9m2 0h2M9 91h9m7 0h2m1 0h2m1 0h29m5 0h15m4 0h1m1 0h46m5 0h17m1 0h18m7 0h11m3 0h6m1 0h1m9 0h9m6 0h4m1 0h3m1 0h1m1 0h9m2 0h2M9 92h9m7 0h2m1 0h2m1 0h29m5 0h15m4 0h1m1 0h48m3 0h17m1 0h18m7 0h12m2 0h10m7 0h9m1 0h1m4 0h10m1 0h10m1 0h2M9 93h11m5 0h2m1 0h33m4 0h17m2 0h1m1 0h48m1 0h1m1 0h36m4 0h1m2 0h12m2 0h10m7 0h11m1 0h13m1 0h10m1 0h2m1 0h1M9 94h11m5 0h2m1 0h34m2 0h19m1 0h1m1 0h88m3 0h1m1 0h13m1 0h11m1 0h1m3 0h1m1 0h36m1 0h2m1 0h1M9 95h11m5 0h2m1 0h147m1 0h76M9 96h18m1 0h224M9 97h12m4 0h2m1 0h148m1 0h75M9 98h10m6 0h2m1 0h33m3 0h17m1 0h1m1 0h1m1 0h49m1 0h38m3 0h1m1 0h13m1 0h10m1 0h2m1 0h1m2 0h37m1 0h4M9 99h10m6 0h2m1 0h33m3 0h16m4 0h1m1 0h49m2 0h37m6 0h12m2 0h9m1 0h1m6 0h11m1 0h24m1 0h1m1 0h1M9 100h10m6 0h2m1 0h32m5 0h15m6 0h48m3 0h35m8 0h12m2 0h8m9 0h10m6 0h10m1 0h9M9 101h10m6 0h35m5 0h15m6 0h48m4 0h34m8 0h12m2 0h8m9 0h10m6 0h9m2 0h8M9 102h7m1 0h2m6 0h3m1 0h22m1 0h8m5 0h15m6 0h47m5 0h10m1 0h4m1 0h18m9 0h10m3 0h8m9 0h10m6 0h3m1 0h3m1 0h1m2 0h8M9 103h7m1 0h1m7 0h3m2 0h21m1 0h1m1 0h6m5 0h15m7 0h3m1 0h2m1 0h11m1 0h27m5 0h9m2 0h4m1 0h10m1 0h7m10 0h9m3 0h1m1 0h5m11 0h7m1 0h1m6 0h3m1 0h3m4 0h8M9 104h5m1 0h1m9 0h3m2 0h21m1 0h1m1 0h5m6 0h1m1 0h13m7 0h2m2 0h2m1 0h11m1 0h10m3 0h14m5 0h5m1 0h3m2 0h3m3 0h9m1 0h7m10 0h9m3 0h1m1 0h3m1 0h1m11 0h7m10 0h1m2 0h2m4 0h8m-236 1h4m1 0h1m9 0h3m2 0h19m1 0h1m1 0h1m1 0h5m6 0h1m1 0h13m7 0h2m2 0h2m1 0h11m1 0h6m1 0h3m3 0h1m1 0h12m6 0h4m1 0h3m2 0h1m7 0h7m1 0h7m10 0h4m1 0h4m5 0h3m1 0h1m11 0h7m19 0h3m1 0h4m-236 1h4m1 0h1m9 0h3m2 0h19m1 0h1m1 0h1m1 0h5m6 0h1m1 0h13m11 0h2m1 0h11m1 0h6m1 0h3m3 0h1m2 0h11m7 0h1m1 0h1m1 0h2m12 0h6m1 0h7m11 0h3m2 0h3m5 0h3m13 0h7m19 0h1m1 0h1m1 0h4m-236 1h1m1 0h2m1 0h1m9 0h3m4 0h17m1 0h1m1 0h1m1 0h5m6 0h1m1 0h4m1 0h7m12 0h2m1 0h11m1 0h6m1 0h3m3 0h1m2 0h1m1 0h8m12 0h2m12 0h6m1 0h6m14 0h1m2 0h3m5 0h2m14 0h7m19 0h1m1 0h1m1 0h4m-233 1h1m1 0h1m9 0h3m4 0h16m2 0h1m1 0h1m1 0h1m1 0h1m1 0h1m6 0h1m1 0h4m1 0h7m12 0h2m1 0h11m1 0h6m1 0h3m3 0h1m2 0h1m1 0h6m14 0h2m12 0h6m1 0h6m14 0h1m2 0h3m5 0h1m15 0h4m1 0h2m19 0h1m1 0h1m1 0h4m-221 1h3m4 0h16m2 0h1m1 0h1m1 0h1m1 0h1m1 0h1m6 0h1m1 0h4m1 0h7m12 0h2m1 0h10m2 0h6m1 0h2m4 0h1m4 0h4m1 0h1m14 0h2m12 0h6m1 0h6m14 0h1m2 0h2m6 0h1m15 0h4m1 0h1m20 0h1m1 0h1m1 0h2m-219 1h3m4 0h16m2 0h1m3 0h1m1 0h1m1 0h1m8 0h4m1 0h7m12 0h2m1 0h10m2 0h1m1 0h4m1 0h2m9 0h4m1 0h1m14 0h1m15 0h4m1 0h6m14 0h1m2 0h1m23 0h2m1 0h1m1 0h1m20 0h1m1 0h1m1 0h2m-219 1h3m4 0h15m3 0h1m3 0h1m1 0h1m10 0h4m1 0h5m1 0h1m12 0h2m1 0h8m6 0h4m1 0h1m10 0h4m1 0h1m30 0h4m1 0h5m18 0h1m23 0h2m1 0h1m1 0h1m20 0h1m1 0h1m1 0h2m-219 1h3m4 0h15m3 0h1m3 0h1m1 0h1m10 0h4m1 0h5m1 0h1m12 0h2m1 0h8m6 0h4m1 0h1m10 0h3m2 0h1m30 0h4m1 0h5m18 0h1m23 0h2m26 0h1m1 0h2m-219 1h1m1 0h1m4 0h15m3 0h1m5 0h1m10 0h4m1 0h5m1 0h1m12 0h2m1 0h3m1 0h1m1 0h2m7 0h3m12 0h2m34 0h3m2 0h4m19 0h1m23 0h2m26 0h1m2 0h1m-219 1h1m1 0h1m4 0h14m4 0h1m5 0h1m10 0h1m1 0h2m3 0h3m1 0h1m12 0h2m1 0h3m1 0h1m1 0h2m7 0h1m14 0h2m34 0h3m3 0h3m19 0h1m23 0h2m26 0h1m-216 1h1m1 0h1m4 0h13m5 0h1m16 0h1m1 0h2m4 0h2m1 0h1m12 0h2m1 0h3m1 0h1m1 0h2m7 0h1m14 0h2m34 0h3m3 0h3m43 0h2m26 0h1m-216 1h1m1 0h1m5 0h12m5 0h1m16 0h1m1 0h1m5 0h2m1 0h1m12 0h2m1 0h3m1 0h1m1 0h2m22 0h2m35 0h1m4 0h3m43 0h1m27 0h1m-216 1h1m1 0h1m5 0h1m1 0h6m1 0h2m6 0h1m16 0h1m1 0h1m5 0h2m1 0h1m12 0h2m1 0h3m1 0h1m2 0h1m22 0h2m41 0h2m43 0h1m27 0h1m-216 1h1m1 0h1m5 0h1m2 0h5m1 0h2m6 0h1m16 0h1m1 0h1m5 0h2m14 0h2m1 0h3m1 0h1m25 0h2m42 0h1m43 0h1m-188 1h1m1 0h1m5 0h1m2 0h5m1 0h2m6 0h1m16 0h1m1 0h1m6 0h1m14 0h2m1 0h2m2 0h1m25 0h2m86 0h1m-188 1h1m1 0h1m8 0h3m1 0h1m9 0h1m16 0h1m1 0h1m21 0h2m1 0h2m28 0h2m86 0h1m-188 1h1m1 0h1m8 0h3m11 0h1m16 0h1m1 0h1m21 0h2m1 0h2m28 0h2m-101 1h1m1 0h1m8 0h3m11 0h1m16 0h1m23 0h2m1 0h1m29 0h2m-101 1h1m1 0h1m8 0h3m11 0h1m16 0h1m23 0h2m1 0h1m30 0h1m-101 1h1m1 0h1m9 0h1m12 0h1m16 0h1m23 0h2m1 0h1m30 0h1m-101 1h1m1 0h1m9 0h1m12 0h1m16 0h1m23 0h2m1 0h1m30 0h1m-101 1h1m1 0h1m9 0h1m29 0h1m23 0h2m1 0h1m30 0h1m-101 1h1m1 0h1m39 0h1m23 0h2m1 0h1m-70 1h1m41 0h1m23 0h2m1 0h1m-70 1h1m41 0h1m23 0h2m1 0h1m-70 1h1m41 0h1m23 0h2m1 0h1m-70 1h1m41 0h1m23 0h2m1 0h1m-70 1h1m41 0h1m23 0h2m1 0h1m-70 1h1m41 0h1m23 0h2m1 0h1m-70 1h1m65 0h2m1 0h1m-70 1h1m65 0h2m1 0h1m-70 1h1m65 0h2m1 0h1m-70 1h1m65 0h2m1 0h1m-70 1h1m65 0h2m1 0h1m-70 1h1m65 0h2m1 0h1m-70 1h1m65 0h2m1 0h1m-70 1h1m65 0h2m1 0h1m-70 1h1m65 0h1m2 0h1m-70 1h1m65 0h1m2 0h1m-70 1h1m65 0h1m2 0h1m-70 1h1m65 0h1m2 0h1m-70 1h1m65 0h1m2 0h1m-70 1h1m65 0h1m2 0h1m-70 1h1m65 0h1m2 0h1m-70 1h1m65 0h1m2 0h1m-70 1h1m68 0h1m-70 1h1m68 0h1m-70 1h1m68 0h1m-70 1h1m68 0h1m-70 1h1m68 0h1m-70 1h1m68 0h1m-70 1h1m68 0h1m-70 1h1m68 0h1m-70 1h1m68 0h1m-70 1h1m68 0h1m-70 1h1m68 0h1m-70 1h1m68 0h1m-70 1h1m68 0h1m-70 1h1m68 0h1m-70 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1m-1 1h1"]
])

(defonce file-atom (r/atom ""))

(defn scale
  "Scales a sequence of values to output between t-min and t-max."
  [values t-min t-max]
  (let [maximum (apply max values)
        minimum (apply min values)
        spread (- maximum minimum)]
    (reverse (map #(+ (* (/ (- % minimum)
                            spread)
                         (- t-max t-min))
                      t-min)
                  values))))

(defonce array-buff (r/atom nil))
(defonce current-sample (r/atom nil))

(defn decode [buff]
  (->
   (.decodeAudioData @(subscribe [:audio-context]) (-> buff .-target .-result))
   (.then #(reset! current-sample %))))

(defn file-upload []
  [:input#input
   {:type      "file"
    :on-change (fn [e]
                 (let [dom    (o/get e "target")
                       file   (o/getValueByKeys dom #js ["files" 0])
                       reader (js/FileReader.)]
                   (.readAsArrayBuffer reader file)
                   (set! (.-onload reader)
                        #(reset! array-buff (-> % .-target .-result
                                                (js/Uint8Array.)
                                                crypt/byteArrayToHex
                                                ;.toUpperCase
                                                )))))}])

(defn offsets
  ([file n] (offsets file n (inc n)))
  ([file from to]
   (map #(apply str %)
        (partition 2 (take (- (* 2 to) (* 2 from))
                           (drop (* 2 from) file))))))

(defn ascii [bytes]
  (apply str (map #(js/String.fromCharCode (str "0x" %)) bytes)))

(defn decimal [bytes]
  (js/parseInt (str "0x" (apply str (reverse bytes)))))

(defn i16
  "Converts an integer (maximum 32-bits) to a signed 16-bit integer."
  [max-b32]
  (let [data-view (js/DataView. (js/ArrayBuffer. 2))]
    (.setUint16 data-view
                0
                max-b32)
    (.getInt16 data-view
               0)))

(defn s2c
  "Reads a pair of bytes as signed little endian 2's complement."
  [bytes]
  (let [dec (js/parseInt (str "0x" (apply str (reverse bytes))))]
    (i16 dec)))

(defn make-path [points]
  (str "M" (apply str (interpose " " (for [x (range (count points))]
                                       (str x " " (- 150 (nth points x))))))))

(defn header [file]
  {:ckID            (ascii (offsets file 0 4))
   :cksize          (decimal (offsets file 4 8))
   :WAVEID          (ascii (offsets file 8 12))
   :fmtID           (ascii (offsets file 12 16))
   :fmtsize         (decimal (offsets file 16 20))
   :wFormatTag      (decimal (offsets file 20 22))
   :nChannels       (decimal (offsets file 22 24))
   :nSamplesPerSec  (decimal (offsets file 24 28))
   :nAvgBytesPerSec (decimal (offsets file 28 32))
   :nBlockAlign     (decimal (offsets file 32 34))
   :wBitsPerSample  (decimal (offsets file 34 36))
   :dataID          (ascii (offsets file 36 40))
   :datasize        (decimal (offsets file 40 44))})

(defn pcm [file]
  (let [datasize (:datasize (header file))]
    (map s2c (partition 2 (map #(apply str %)
                               (take datasize (partition 2 (drop 88 file))))))))

(pcm @array-buff)

(defn graph [file]
  (let [data (pcm file)
        len (count data)
        parts (.ceil js/Math (/ len 200))
        trimmed (partition parts data)
        mean #(/ (apply + %) (count %))
        median #(first (drop (/ 2 (count %)) (sort %)))]
    [:g
     [:rect#sampleframe
      {:stroke "black"
       :stroke-width 0.2
       :fill "none"
       :height 9.5 :width 20 :x 25 :y 4.25}]
     [:path {:transform (str "scale(0.1), translate(250,-20)")
             :d (make-path (reverse (scale (map first trimmed) 0 64)))
             :stroke       "black"
             :stroke-width 0.5
             :fill         "none"}]]))